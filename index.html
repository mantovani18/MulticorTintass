<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catálogo de Cores com Fundo Animado</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary-color: #007bff;
      --secondary-color: #0056b3;
      --dark-color: #333;
      --light-color: #ffffff;
      --background-light: #fdfdfd; 
      --background-muted: #f8f9fa;
      --text-color: #555;
      --success-color: #28a745;
      --danger-color: #dc3545;
      --font-family: 'Poppins', sans-serif;
      --shadow-sm: 0 4px 6px rgba(0,0,0,0.05);
      --shadow-md: 0 10px 15px rgba(0,0,0,0.1);
      --border-radius: 12px;
    }
    body {
      font-family: var(--font-family);
      margin: 0;
      padding-top: 80px;
      background-color: #000; 
      color: var(--text-color);
    }
    #backgroundCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
      pointer-events: none;
    }
    header {
      background-color: var(--light-color);
      padding: 1rem 2rem;
      box-shadow: var(--shadow-sm);
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
    }
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }
    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    nav ul {
        list-style: none;
        display: flex;
        gap: 2.5rem;
        margin: 0;
    }
    nav a {
        text-decoration: none;
        color: var(--dark-color);
        font-weight: 600;
    }
    section {
      padding: 3rem 2rem;
      text-align: center;
      background-color: var(--light-color);
      margin: 2rem auto;
      border-radius: var(--border-radius);
      max-width: 1200px;
      box-shadow: var(--shadow-md);
    }
    h2 {
      font-size: 2.5rem;
      margin-top: 0;
      margin-bottom: 2rem;
      color: var(--dark-color);
      font-weight: 700;
    }
    .filter-container {
      max-width: 1200px;
      margin: 0 auto 2.5rem auto;
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      justify-content: center;
      align-items: center;
    }
    #search-bar {
        padding: 12px 20px; font-size: 1rem; border-radius: 50px;
        border: 1px solid #ddd; min-width: 300px; outline: none;
        transition: border-color 0.3s, box-shadow 0.3s;
    }
    #search-bar:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
    }
    #category-filters {
      display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center;
    }
    .filter-btn {
      padding: 10px 20px; font-size: 0.9rem; font-weight: 600;
      border: 1px solid #ddd; background-color: var(--light-color);
      border-radius: 50px; cursor: pointer; transition: all 0.3s ease;
    }
    .filter-btn.active {
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: var(--light-color); border-color: var(--primary-color);
    }
    
    .color-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    .color-swatch {
      height: 120px;
      border-radius: var(--border-radius);
      border: 1px solid #eee;
      padding: 0.8rem;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      position: relative;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .color-swatch:hover {
        transform: scale(1.05);
        box-shadow: var(--shadow-md);
        z-index: 10;
    }
    .color-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
    }
    .color-details { text-align: left; }
    .color-name { font-weight: 600; font-size: 0.95rem; }
    .color-name .brand-prefix {
        font-weight: 400;
        opacity: 0.8;
        font-size: 0.8em;
        display: block;
    }
    .color-code { font-size: 0.8rem; opacity: 0.8; }
    
    .add-color-btn {
      border-radius: 50%;
      width: 36px; height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      transition: transform 0.2s ease, background-color 0.2s;
      flex-shrink: 0;
    }
    .add-color-btn:hover { transform: scale(1.15); }
    .add-color-btn svg { width: 20px; height: 20px; }
    
    .dark-text .color-name, .dark-text .color-code { color: #222; }
    .dark-text .add-color-btn {
        background: rgba(255, 255, 255, 0.6);
        border: 1px solid rgba(0, 0, 0, 0.1);
    }
    .dark-text .add-color-btn svg { fill: #333; }
    .light-text .color-name, .light-text .color-code { color: #fff; }
    .light-text .add-color-btn {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .light-text .add-color-btn svg { fill: #fff; }

    #cotação { display: none; }
    .cotação-container {
        max-width: 800px; margin: 0 auto; background: var(--light-color);
        padding: 2rem; border-radius: var(--border-radius);
        box-shadow: var(--shadow-sm); text-align: left;
    }
    .cotação-item {
        display: grid; grid-template-columns: auto 1fr auto auto;
        gap: 1rem; align-items: center; padding: 1rem 0;
        border-bottom: 1px solid #eee;
    }
    .cart-color-preview { width: 24px; height: 24px; border-radius: 50%; border: 1px solid #ccc; }
    .quantity-controls { display: flex; align-items: center; gap: 0.7rem; }
    .quantity-btn {
        background: #f1f1f1; border: none; width: 32px; height: 32px;
        border-radius: 50%; cursor: pointer; font-size: 1.2rem;
        font-weight: bold; line-height: 1;
    }
    
    .cotação-actions {
        margin-top: 2.5rem;
        background: var(--background-muted);
        padding: 1.5rem 2rem;
        border-radius: var(--border-radius);
        border: 1px solid #e9ecef;
    }
    .cotação-actions h4 {
        margin-top: 0;
        margin-bottom: 0.5rem;
        font-size: 1.2rem;
        color: var(--dark-color);
    }
    .cotação-actions p {
        font-size: 0.9rem;
        color: var(--text-color);
        margin-bottom: 1.5rem;
    }
    .cotação-actions textarea {
        padding: 12px 20px; font-size: 1rem; border-radius: var(--border-radius);
        border: 1px solid #ddd; min-height: 80px; resize: vertical;
        font-family: var(--font-family); box-sizing: border-box; width: 100%;
        margin-bottom: 1rem;
    }
    #btn-whatsapp {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.7rem;
        width: 100%;
        background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        box-shadow: var(--shadow-sm);
        transition: background-color 0.3s ease, transform 0.2s ease;
    }
    #btn-whatsapp:hover {
        transform: translateY(-2px);
    }
    #btn-whatsapp svg {
        width: 24px;
        height: 24px;
    }
    
    #toast-notification {
      visibility: hidden;
      min-width: 250px;
      background-color: var(--success-color);
      color: #fff;
      text-align: center;
      border-radius: 50px;
      padding: 12px 24px;
      position: fixed;
      z-index: 2000;
      left: 50%;
      bottom: 30px;
      font-size: 1rem;
      font-weight: 600;
      box-shadow: var(--shadow-md);
      opacity: 0;
      transform: translate(-50%, 10px) scale(0.95);
      transition: all 0.4s cubic-bezier(0.21, 1.02, 0.73, 1);
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    #toast-notification.show {
      visibility: visible;
      opacity: 1;
      bottom: 50px;
      transform: translate(-50%, 0) scale(1);
    }
    #toast-notification svg {
        width: 20px;
        height: 20px;
    }

    footer {
      padding: 2.5rem; margin: 2rem auto 0 auto; text-align: center;
      background-color: var(--light-color); border-radius: var(--border-radius);
      max-width: 1200px; box-shadow: var(--shadow-md);
    }
  </style>
</head>
<body>
  <canvas id="backgroundCanvas"></canvas>
  <header>
    <nav>
      <div class="logo">Multicor</div>
      <ul>
        <li><a href="#catalogo">Catálogo de Cores</a></li>
        <li><a href="#cotação">Sua Lista</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="catalogo">
      <h2>Explore um Mundo de Cores</h2>
      <div class="filter-container">
        <input type="search" id="search-bar" placeholder="Pesquisar por nome da cor...">
        <div id="category-filters">
          <button class="filter-btn active" data-filter="all">Todas</button>
          <button class="filter-btn" data-filter="suvinil">Suvinil</button>
          <button class="filter-btn" data-filter="coral">Coral</button>
          <button class="filter-btn" data-filter="anjo">Anjo</button>
          <button class="filter-btn" data-filter="sherwin">Sherwin-Williams</button>
          <button class="filter-btn" data-filter="lukscolor">Lukscolor</button>
        </div>
      </div>

      <div class="color-gallery">
        </div>
    </section>

    <section id="cotação">
      <h2>Sua Lista de Cores</h2>
      <div class="cotação-container">
        <div id="cotação-items">
          </div>
        
        <div class="cotação-actions">
          <h4>Finalizar e Enviar</h4>
          <p>Sua lista será enviada para nosso número de atendimento para iniciarmos a cotação.</p>
          <label for="optional-message" style="display:none;">Mensagem Opcional:</label>
          <textarea id="optional-message" placeholder="Escreva uma mensagem opcional aqui... (Ex: tipo de acabamento, quantidade em litros, etc)"></textarea>
          <button id="btn-whatsapp" class="btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 16 16">
                <path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"/>
            </svg>
            Enviar por WhatsApp
          </button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p style="font-size:1rem;color:var(--dark-color);">Multicor &copy; 2025 - Todos os direitos reservados.</p>
  </footer>

  <div id="toast-notification"></div>

  <script>
    // --- SCRIPT DOS PINGOS DE TINTA FLUTUANTES ---
    function resizeCanvas() {
      const canvas = document.getElementById('backgroundCanvas');
      if (!canvas) return;
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const paintColors = [
      '#FF5733', '#33FF57', '#3357FF',
      '#FF33F5', '#FFEC33', '#8A2BE2'
    ];

    class PaintDrop {
      constructor(x, y, radius, color, dx, dy) {
        this.x = x;
        this.y = y;
        this.radius = radius;
        this.color = color;
        this.dx = dx;
        this.dy = dy;
        this.alpha = 0.5 + Math.random() * 0.3;
      }

      draw(ctx) {
        ctx.save();
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
        ctx.globalAlpha = this.alpha;
        ctx.fillStyle = this.color;
        ctx.shadowColor = this.color;
        ctx.shadowBlur = 15;
        ctx.fill();
        ctx.restore();
      }

      update(ctx, canvasWidth, canvasHeight) {
        this.x += this.dx;
        this.y += this.dy;

        if (this.x + this.radius > canvasWidth || this.x - this.radius < 0) { this.dx = -this.dx; }
        if (this.y + this.radius > canvasHeight || this.y - this.radius < 0) { this.dy = -this.dy; }
        
        this.draw(ctx);
      }
    }

    let paintDrops = [];
    const numberOfDrops = 30;

    function initPaintDrops() {
      const canvas = document.getElementById('backgroundCanvas');
      if (!canvas) return;
      paintDrops = [];
      for (let i = 0; i < numberOfDrops; i++) {
        const radius = 15 + Math.random() * 25;
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        const color = paintColors[Math.floor(Math.random() * paintColors.length)];
        const dx = (Math.random() - 0.5) * 2;
        const dy = (Math.random() - 0.5) * 2;
        paintDrops.push(new PaintDrop(x, y, radius, color, dx, dy));
      }
    }

    function animatePaintDrops() {
      const canvas = document.getElementById('backgroundCanvas');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (const drop of paintDrops) {
        drop.update(ctx, canvas.width, canvas.height);
      }
      requestAnimationFrame(animatePaintDrops);
    }

    initPaintDrops();
    animatePaintDrops();

    // --- CÓDIGO DO CATÁLOGO DE CORES ---
    document.addEventListener('DOMContentLoaded', function() {
      const colorGallery = document.querySelector('.color-gallery');
      const filterButtons = document.querySelectorAll('.filter-btn');
      const searchBar = document.getElementById('search-bar');
      const cartSection = document.getElementById('cotação');
      const cartItemsContainer = document.getElementById('cotação-items');
      const btnWhatsapp = document.getElementById('btn-whatsapp');
      let cart = [];

      const baseColors = {
        suvinil: [ { name: 'Crômio', hex: '#B7B8B6' }, { name: 'Elefante', hex: '#9B9A98' }, { name: 'Gelo', hex: '#E6E6E2' }, { name: 'Palha', hex: '#E8D9BE' }, { name: 'Branco Neve', hex: '#F8F8F8' }, { name: 'Calopsita', hex: '#E2D8D0' }, { name: 'Ouro Branco', hex: '#EFEBE0' }, { name: 'Papel Picado', hex: '#D7D2C7' }, { name: 'Algodão Egípcio', hex: '#E8DBC6' }, { name: 'Broto de Feijão', hex: '#C2B9A2' }, { name: 'Açúcar Cristal', hex: '#F0EBE4' }, { name: 'Verde-piscina', hex: '#93D5D9' }, { name: 'Azul-praia', hex: '#B4D2E4' }, { name: 'Céu de Inverno', hex: '#BED2E0' }, { name: 'Apatita', hex: '#589498' }, { name: 'Melancia', hex: '#F04E63' }, { name: 'Mostarda', hex: '#DDBD1E' }, { name: 'Chocolate Suíço', hex: '#654321' }, { name: 'Eclipse', hex: '#3B4045' }, { name: 'Cítrico', hex: '#9FB70A' } ],
        coral: [ { name: 'Adorno Rupestre', hex: '#BEA992' }, { name: 'Jardim de Inverno', hex: '#D7D6D0' }, { name: 'Mergulho Sereno', hex: '#90A8B6' }, { name: 'Branco Europeu', hex: '#F3F0E8' }, { name: 'Doce de Mamão', hex: '#F8C7A0' }, { name: 'Vento Suave', hex: '#DDE4E8' }, { name: 'Bronze Conectado', hex: '#8F7160' }, { name: 'Verde-Bambu', hex: '#97A882' }, { name: 'Azul-Místico', hex: '#4B5B6D' }, { name: 'Madeira Nova', hex: '#A36A43' }, { name: 'Lápis Lazuli', hex: '#26619C' }, { name: 'Gota de Orvalho', hex: '#E1E4D7' }, { name: 'Rosa Puccini', hex: '#E5C4CB' }, { name: 'Navegante Solitário', hex: '#5E6B7A' }, { name: 'Creme de Milho', hex: '#F7E0A3' }, { name: 'Verde-Escuro', hex: '#004225' }, { name: 'Pedra Esculpida', hex: '#A9A195' }, { name: 'Corda de Viola', hex: '#B8A484' }, { name: 'Vista do Imperador', hex: '#4F6347' }, { name: 'Pérola Japonesa', hex: '#E8E1CF' } ],
        sherwin: [ { name: 'Alabaster', hex: '#EDEAE0' }, { name: 'Naval', hex: '#2F4050' }, { name: 'Agreeable Gray', hex: '#D4CEC3' }, { name: 'Repose Gray', hex: '#CBC6BC' }, { name: 'Sea Salt', hex: '#CAD8C7' }, { name: 'Tricorn Black', hex: '#2E2D2D' }, { name: 'Urbane Bronze', hex: '#59524C' }, { name: 'Evergreen Fog', hex: '#586156' }, { name: 'Pure White', hex: '#F3F3F1' }, { name: 'Mindful Gray', hex: '#BFB9AD' }, { name: 'Accessible Beige', hex: '#D2C8B8' }, { name: 'Iron Ore', hex: '#444240' }, { name: 'Dovetail', hex: '#777269' }, { name: 'Rainwashed', hex: '#D0DDD7' }, { name: 'Kilim Beige', hex: '#DECBB1' }, { name: 'Comfort Gray', hex: '#BECDBF' }, { name: 'Gauntlet Gray', hex: '#66625D' }, { name: 'Tradewind', hex: '#BACCD2' }, { name: 'Cavern Clay', hex: '#B97B67' }, { name: 'Upward', hex: '#C2D1D9' } ],
        lukscolor: [ { name: 'Marfim', hex: '#EEE8AA' }, { name: 'Palha', hex: '#F3E5AB' }, { name: 'Camurça', hex: '#C8A17B' }, { name: 'Concreto', hex: '#808080' }, { name: 'Cinza Níquel', hex: '#A0A0A0' }, { name: 'Verde-Kiwi', hex: '#8EE53F' }, { name: 'Azul-Arpoador', hex: '#5D94A9' }, { name: 'Pêssego', hex: '#FFDAB9' }, { name: 'Branco Gelo', hex: '#F0FFFF' }, { name: 'Chocolate', hex: '#7B3F00' }, { name: 'Verde-Amazonas', hex: '#345511' }, { name: 'Amarelo-Canário', hex: '#FFEF00' }, { name: 'Rubi', hex: '#9B111E' }, { name: 'Lápis-Lazuli', hex: '#26619C' }, { name: 'Prata', hex: '#C0C0C0' }, { name: 'Ocre', hex: '#CC7722' }, { name: 'Ametista', hex: '#9966CC' } ],
        anjo: [ { name: 'Branco Neve', hex: '#F5FFFA' }, { name: 'Gelo', hex: '#F0F8FF' }, { name: 'Marfim', hex: '#FFFFF0' }, { name: 'Amarelo Ouro', hex: '#FFDF00' }, { name: 'Laranja', hex: '#FFA500' }, { name: 'Vermelho Segurança', hex: '#FF0000' }, { name: 'Azul Segurança', hex: '#007FFF' }, { name: 'Azul Del Rey', hex: '#0047AB' }, { name: 'Verde Folha', hex: '#50882E' }, { name: 'Cinza Médio', hex: '#BEBEBE' }, { name: 'Marrom Tabaco', hex: '#5C3317' }, { name: 'Preto', hex: '#000000' }, { name: 'Amarelo Demarcação', hex: '#FEDD00' }, { name: 'Cinza Platina', hex: '#C9C0BB' }, { name: 'Verde Nilo', hex: '#548777' }, { name: 'Cerâmica', hex: '#B22222' } ]
      };

      function adjustHex(hex, percent) {
          let f=parseInt(hex.slice(1),16),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=f>>16,G=f>>8&0x00FF,B=f&0x0000FF;
          return "#"+(0x1000000+(Math.round((t-R)*p)+R)*0x10000+(Math.round((t-G)*p)+G)*0x100+(Math.round((t-B)*p)+B)).toString(16).slice(1).toUpperCase();
      }
      
      let colorsData = [];
      const shadeNames = [" Intenso", " Escuro", " Suave", " Claro", " Leve"];
      
      for(const brand in baseColors){
          baseColors[brand].forEach(color => {
              colorsData.push({...color, brand: brand});
              for (let i = 0; i < 4; i++) {
                  colorsData.push({ name: color.name + shadeNames[i % 2], hex: adjustHex(color.hex, -(i * 0.1 + 0.1)), brand: brand });
                  colorsData.push({ name: color.name + shadeNames[i % 2 + 2], hex: adjustHex(color.hex, (i * 0.15 + 0.1)), brand: brand });
              }
          });
      }

      function hexToHsl(hex) {
          let r = 0, g = 0, b = 0;
          if (hex.length == 4) { r = "0x" + hex[1] + hex[1]; g = "0x" + hex[2] + hex[2]; b = "0x" + hex[3] + hex[3]; } 
          else if (hex.length == 7) { r = "0x" + hex[1] + hex[2]; g = "0x" + hex[3] + hex[4]; b = "0x" + hex[5] + hex[6]; }
          r /= 255; g /= 255; b /= 255;
          let cmin = Math.min(r,g,b), cmax = Math.max(r,g,b), delta = cmax - cmin, h = 0, s = 0, l = 0;
          if (delta == 0) h = 0;
          else if (cmax == r) h = ((g - b) / delta) % 6;
          else if (cmax == g) h = (b - r) / delta + 2;
          else h = (r - g) / delta + 4;
          h = Math.round(h * 60);
          if (h < 0) h += 360;
          l = (cmax + cmin) / 2;
          s = delta == 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));
          s = +(s * 100).toFixed(1);
          l = +(l * 100).toFixed(1);
          return {h, s, l};
      }

      colorsData.sort((a, b) => {
          const hslA = hexToHsl(a.hex);
          const hslB = hexToHsl(b.hex);
          if (hslA.h < hslB.h) return -1;
          if (hslA.h > hslB.h) return 1;
          if (hslA.s > hslB.s) return -1;
          if (hslA.s < hslB.s) return 1;
          if (hslA.l > hslB.l) return -1;
          if (hslA.l < hslB.l) return 1;
          return 0;
      });

      function getLuminance(hex) {
          let r = 0, g = 0, b = 0;
          if (hex.length == 4) { r = "0x" + hex[1] + hex[1]; g = "0x" + hex[2] + hex[2]; b = "0x" + hex[3] + hex[3]; } 
          else if (hex.length == 7) { r = "0x" + hex[1] + hex[2]; g = "0x" + hex[3] + hex[4]; b = "0x" + hex[5] + hex[6]; }
          return (0.299 * r + 0.587 * g + 0.114 * b) / 255;
      }

      const brandMap = {
          suvinil: 'Suvinil',
          coral: 'Coral',
          sherwin: 'Sherwin-Williams',
          lukscolor: 'Lukscolor',
          anjo: 'Anjo'
      };

      function displayColors(colors) {
          colorGallery.innerHTML = colors.map(color => {
            const textColorClass = getLuminance(color.hex) > 0.5 ? 'dark-text' : 'light-text';
            const brandName = brandMap[color.brand] || color.brand;
            const fullName = `${brandName} - ${color.name}`;
            return `
            <div class="color-swatch ${textColorClass}" data-brand="${color.brand}" style="background-color: ${color.hex};">
              <div class="color-info">
                  <div class="color-details">
                      <div class="color-name">${fullName}</div>
                      <div class="color-code">${color.hex.toUpperCase()}</div>
                  </div>
                  <button class="add-color-btn" data-name="${fullName}" data-hex="${color.hex}" data-brand="${color.brand}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 16 16"><path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 4 0h3.5a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0"/></svg>
                  </button>
              </div>
            </div>
          `}).join('');
      }

      displayColors(colorsData);

      function applyFilters() {
        const searchTerm = searchBar.value.toLowerCase().trim();
        const activeFilter = document.querySelector('.filter-btn.active').getAttribute('data-filter');
        const colorSwatches = document.querySelectorAll('.color-swatch');

        colorSwatches.forEach(swatch => {
            const brand = swatch.getAttribute('data-brand');
            const colorName = swatch.querySelector('.color-name').textContent.toLowerCase();
            const categoryMatch = (activeFilter === 'all' || activeFilter === brand);
            const searchMatch = colorName.includes(searchTerm);
            swatch.style.display = (categoryMatch && searchMatch) ? 'flex' : 'none';
        });
      }

      filterButtons.forEach(button => {
        button.addEventListener('click', () => {
          filterButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          applyFilters();
        });
      });

      searchBar.addEventListener('input', applyFilters);

      function showToast(message) {
        const toast = document.getElementById('toast-notification');
        toast.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg> <span>${message}</span>`;
        toast.classList.add('show');
        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }

      function renderCart() {
        if (cart.length === 0) {
          cartSection.style.display = 'none';
          return;
        }
        cartSection.style.display = 'block';
        cartItemsContainer.innerHTML = cart.map((item, index) => `
          <div class="cotação-item">
            <div class="cart-color-preview" style="background-color: ${item.hex};"></div>
            <span>${item.name} <small>(${item.hex})</small></span>
            <div class="quantity-controls">
              <button class="quantity-btn decrease-btn" data-index="${index}">-</button>
              <span class="quantity-display">${item.quantity}</span>
              <button class="quantity-btn increase-btn" data-index="${index}">+</button>
            </div>
            <button class="remove-btn" data-index="${index}">&times;</button>
          </div>
        `).join('');
      }

      function updateCart(colorName, colorHex, colorBrand) {
          const existingItem = cart.find(item => item.name === colorName);
          if (existingItem) {
              existingItem.quantity++;
              showToast(`+1 ${colorName}`);
          } else {
              cart.push({ name: colorName, hex: colorHex, brand: colorBrand, quantity: 1 });
              showToast(`${colorName} adicionado!`);
          }
          renderCart();
      }

      function updateQuantity(index, change) {
          if (cart[index]) {
              cart[index].quantity += change;
              if (cart[index].quantity <= 0) {
                  cart.splice(index, 1);
              }
              renderCart();
          }
      }

      document.body.addEventListener('click', function(e) {
          const target = e.target.closest('.add-color-btn');
          if (target) {
              updateCart(target.getAttribute('data-name'), target.getAttribute('data-hex'), target.getAttribute('data-brand'));
              return;
          }

          const increaseBtn = e.target.closest('.increase-btn');
          if (increaseBtn) {
              updateQuantity(parseInt(increaseBtn.getAttribute('data-index'), 10), 1);
              return;
          }

          const decreaseBtn = e.target.closest('.decrease-btn');
          if (decreaseBtn) {
              updateQuantity(parseInt(decreaseBtn.getAttribute('data-index'), 10), -1);
              return;
          }

          const removeBtn = e.target.closest('.remove-btn');
          if (removeBtn) {
              const removedItem = cart.splice(parseInt(removeBtn.getAttribute('data-index'), 10), 1);
              showToast(`${removedItem[0].name} removido.`);
              renderCart();
          }
      });

      btnWhatsapp.addEventListener('click', () => {
        const phoneNumber = '43996070004';
        if (cart.length === 0) {
            alert('Sua lista está vazia!');
            return;
        }
        const optionalMessage = document.getElementById('optional-message').value.trim();
        let message = "Olá! Gostaria de um orçamento para as seguintes cores:\n\n";
        cart.forEach(item => {
            message += `• ${item.name} (${item.hex.toUpperCase()}) (Quantidade: ${item.quantity})\n`;
        });
        if (optionalMessage) {
            message += `\n*Mensagem Adicional:*\n${optionalMessage}\n`;
        }
        message += "\nObrigado(a)!";
        window.open(`https://wa.me/55${phoneNumber}?text=${encodeURIComponent(message)}`, '_blank');
      });
    });
  </script>
</body>
</html>
